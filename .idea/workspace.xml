<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="AIAssistantCustomInstructionsStorage">
    <option name="instructions">
      <map>
        <entry key="AIAssistant.VCS.GenerateCommitMessage">
          <value>
            <AIAssistantStoredInstruction>
              <option name="actionId" value="AIAssistant.VCS.GenerateCommitMessage" />
              <option name="content" value="Avoid overly verbose descriptions or unnecessary details. Broke each file " />
            </AIAssistantStoredInstruction>
          </value>
        </entry>
      </map>
    </option>
  </component>
  <component name="AutoImportSettings">
    <option name="autoReloadType" value="SELECTIVE" />
  </component>
  <component name="ChangeListManager">
    <list default="true" id="061ea5ed-5158-4b41-9f37-6b36b005802a" name="Changes" comment="Fix redundant parentheses in dependency injection calls&#10;&#10;Removed unnecessary parentheses from `Depends(auth.authenticated)` in `image_api.py` and `auth_api.py` to resolve potential issues with FastAPI's dependency injection. This change ensures alignment with FastAPI's expected usage and improves code readability. Additionally, restructured `load_dotenv()` placement for consistency across modules.">
      <change afterPath="$PROJECT_DIR$/model/enum/model_type.py" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/model/enum/workflow_segment_type.py" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/model/enum/workflow_type.py" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/model/image_model.py" afterDir="false" />
      <change afterPath="$PROJECT_DIR$/model/workflow_model.py" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.idea/art.iml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/art.iml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.idea/misc.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/misc.xml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/comfy/comfy_core.py" beforeDir="false" afterPath="$PROJECT_DIR$/comfy/comfy_core.py" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/comfy/workflows/Flux-SVDQ-base.json" beforeDir="false" afterPath="$PROJECT_DIR$/comfy/workflows/Flux-SVDQ-base.json" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/docker-compose.yaml" beforeDir="false" afterPath="$PROJECT_DIR$/docker-compose.yaml" afterDir="false" />
      <change beforePath="$PROJECT_DIR$/main.py" beforeDir="false" afterPath="$PROJECT_DIR$/main.py" afterDir="false" />
    </list>
    <option name="SHOW_DIALOG" value="false" />
    <option name="HIGHLIGHT_CONFLICTS" value="true" />
    <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
    <option name="LAST_RESOLUTION" value="IGNORE" />
  </component>
  <component name="FileTemplateManagerImpl">
    <option name="RECENT_TEMPLATES">
      <list>
        <option value="FastAPI main" />
        <option value="FastAPI test_main" />
        <option value="Python Script" />
      </list>
    </option>
  </component>
  <component name="Git.Settings">
    <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
  </component>
  <component name="GitHubPullRequestSearchHistory">{
  &quot;lastFilter&quot;: {
    &quot;state&quot;: &quot;OPEN&quot;,
    &quot;assignee&quot;: &quot;pedroluizmossi1&quot;
  }
}</component>
  <component name="GithubDefaultAccount">
    <option name="defaultAccountId" value="d8c852e9-a7f9-4a26-802d-13fc7eb8a8e0" />
  </component>
  <component name="GithubPullRequestsUISettings">{
  &quot;selectedUrlAndAccountId&quot;: {
    &quot;url&quot;: &quot;https://github.com/pedroluizmossi1/o-art.git&quot;,
    &quot;accountId&quot;: &quot;d8c852e9-a7f9-4a26-802d-13fc7eb8a8e0&quot;
  }
}</component>
  <component name="JsbtTreeLayoutManager">
    <layout place="tools.popupGrunt">
      <scroll-view-position x="0" y="0" />
    </layout>
  </component>
  <component name="ProjectColorInfo">{
  &quot;associatedIndex&quot;: 5
}</component>
  <component name="ProjectId" id="2vnBDjEhSM4S8V6aMFs8yjzf4qM" />
  <component name="ProjectLevelVcsManager">
    <ConfirmationsSetting value="2" id="Add" />
  </component>
  <component name="ProjectViewState">
    <option name="hideEmptyMiddlePackages" value="true" />
    <option name="showLibraryContents" value="true" />
  </component>
  <component name="PropertiesComponent"><![CDATA[{
  "keyToString": {
    "ASKED_SHARE_PROJECT_CONFIGURATION_FILES": "true",
    "Docker.docker-compose.yaml: Compose Deployment.executor": "Run",
    "FastAPI.art.executor": "Run",
    "Python tests.Python tests for test_user_handler.test_handle_user_webhook_unknown_type.executor": "Run",
    "Python tests.Python tests for test_user_handler.test_handle_user_webhook_user_created.executor": "Run",
    "Python tests.Python tests in test_user_handler.py.executor": "Coverage",
    "Python tests.Python tests in tests.executor": "Run",
    "Python tests.pytest for test_user_handler.executor": "Run",
    "Python.Worker.executor": "Run",
    "RunOnceActivity.ShowReadmeOnStart": "true",
    "RunOnceActivity.TerminalTabsStorage.copyFrom.TerminalArrangementManager": "true",
    "RunOnceActivity.git.unshallow": "true",
    "SHARE_PROJECT_CONFIGURATION_FILES": "true",
    "git-widget-placeholder": "master",
    "ignore.virus.scanning.warn.message": "true",
    "junie.onboarding.icon.badge.shown": "true",
    "last_opened_file_path": "/home/pedro/PycharmProjects/o-art/model",
    "node.js.detected.package.eslint": "true",
    "node.js.detected.package.tslint": "true",
    "node.js.selected.package.eslint": "(autodetect)",
    "node.js.selected.package.tslint": "(autodetect)",
    "nodejs_package_manager_path": "npm",
    "settings.editor.selected.configurable": "Docker",
    "vue.rearranger.settings.migration": "true"
  }
}]]></component>
  <component name="RecentsManager">
    <key name="CopyFile.RECENT_KEYS">
      <recent name="$PROJECT_DIR$/model" />
      <recent name="$PROJECT_DIR$/model/enum" />
      <recent name="C:\Users\pedro\PycharmProjects\art" />
      <recent name="C:\Users\pedro\PycharmProjects\art\comfy\workflows" />
    </key>
    <key name="MoveFile.RECENT_KEYS">
      <recent name="C:\Users\pedro\PycharmProjects\art\core" />
      <recent name="C:\Users\pedro\PycharmProjects\art\api" />
    </key>
  </component>
  <component name="RunManager" selected="FastAPI.art">
    <configuration name="Worker" type="PythonConfigurationType" factoryName="Python">
      <module name="art" />
      <option name="ENV_FILES" value="" />
      <option name="INTERPRETER_OPTIONS" value="" />
      <option name="PARENT_ENVS" value="true" />
      <envs>
        <env name="PYTHONUNBUFFERED" value="1" />
      </envs>
      <option name="SDK_HOME" value="" />
      <option name="WORKING_DIRECTORY" value="C:\Users\pedro\PycharmProjects\art" />
      <option name="IS_MODULE_SDK" value="false" />
      <option name="ADD_CONTENT_ROOTS" value="true" />
      <option name="ADD_SOURCE_ROOTS" value="true" />
      <EXTENSION ID="PythonCoverageRunConfigurationExtension" runner="coverage.py" />
      <option name="SCRIPT_NAME" value="worker.py" />
      <option name="PARAMETERS" value="" />
      <option name="SHOW_COMMAND_LINE" value="false" />
      <option name="EMULATE_TERMINAL" value="false" />
      <option name="MODULE_MODE" value="false" />
      <option name="REDIRECT_INPUT" value="false" />
      <option name="INPUT_FILE" value="" />
      <method v="2" />
    </configuration>
    <configuration name="art" type="Python.FastAPI">
      <option name="file" value="$PROJECT_DIR$/main.py" />
      <module name="art" />
      <option name="ENV_FILES" value="" />
      <option name="INTERPRETER_OPTIONS" value="" />
      <option name="PARENT_ENVS" value="true" />
      <option name="SDK_HOME" value="" />
      <option name="WORKING_DIRECTORY" value="" />
      <option name="IS_MODULE_SDK" value="false" />
      <option name="ADD_CONTENT_ROOTS" value="true" />
      <option name="ADD_SOURCE_ROOTS" value="true" />
      <EXTENSION ID="PythonCoverageRunConfigurationExtension" runner="coverage.py" />
      <option name="launchJavascriptDebuger" value="false" />
      <method v="2" />
    </configuration>
    <configuration name="docker-compose.yaml: Compose Deployment" type="docker-deploy" factoryName="docker-compose.yml" temporary="true" server-name="Docker">
      <deployment type="docker-compose.yml">
        <settings>
          <option name="envFilePath" value="" />
          <option name="sourceFilePath" value="docker-compose.yaml" />
        </settings>
      </deployment>
      <method v="2" />
    </configuration>
    <configuration name="Python tests for test_user_handler.test_handle_user_webhook_unknown_type" type="tests" factoryName="Autodetect" temporary="true" nameIsGenerated="true">
      <module name="art" />
      <option name="ENV_FILES" value="" />
      <option name="INTERPRETER_OPTIONS" value="" />
      <option name="PARENT_ENVS" value="true" />
      <option name="SDK_HOME" value="" />
      <option name="WORKING_DIRECTORY" value="$PROJECT_DIR$/tests" />
      <option name="IS_MODULE_SDK" value="true" />
      <option name="ADD_CONTENT_ROOTS" value="true" />
      <option name="ADD_SOURCE_ROOTS" value="true" />
      <EXTENSION ID="PythonCoverageRunConfigurationExtension" runner="coverage.py" />
      <option name="_new_additionalArguments" value="&quot;&quot;" />
      <option name="_new_target" value="&quot;test_user_handler.test_handle_user_webhook_unknown_type&quot;" />
      <option name="_new_targetType" value="&quot;PYTHON&quot;" />
      <method v="2" />
    </configuration>
    <configuration name="Python tests in test_user_handler.py" type="tests" factoryName="Autodetect" temporary="true" nameIsGenerated="true">
      <module name="art" />
      <option name="ENV_FILES" value="" />
      <option name="INTERPRETER_OPTIONS" value="" />
      <option name="PARENT_ENVS" value="true" />
      <option name="SDK_HOME" value="" />
      <option name="WORKING_DIRECTORY" value="$PROJECT_DIR$/tests" />
      <option name="IS_MODULE_SDK" value="true" />
      <option name="ADD_CONTENT_ROOTS" value="true" />
      <option name="ADD_SOURCE_ROOTS" value="true" />
      <EXTENSION ID="PythonCoverageRunConfigurationExtension" runner="coverage.py" />
      <option name="_new_additionalArguments" value="&quot;&quot;" />
      <option name="_new_target" value="&quot;$PROJECT_DIR$/tests/test_user_handler.py&quot;" />
      <option name="_new_targetType" value="&quot;PATH&quot;" />
      <method v="2" />
    </configuration>
    <configuration name="Python tests in tests" type="tests" factoryName="Autodetect" temporary="true" nameIsGenerated="true">
      <module name="art" />
      <option name="ENV_FILES" value="" />
      <option name="INTERPRETER_OPTIONS" value="" />
      <option name="PARENT_ENVS" value="true" />
      <option name="SDK_HOME" value="" />
      <option name="WORKING_DIRECTORY" value="$PROJECT_DIR$/tests" />
      <option name="IS_MODULE_SDK" value="true" />
      <option name="ADD_CONTENT_ROOTS" value="true" />
      <option name="ADD_SOURCE_ROOTS" value="true" />
      <EXTENSION ID="PythonCoverageRunConfigurationExtension" runner="coverage.py" />
      <option name="_new_additionalArguments" value="&quot;&quot;" />
      <option name="_new_target" value="&quot;$PROJECT_DIR$/tests&quot;" />
      <option name="_new_targetType" value="&quot;PATH&quot;" />
      <method v="2" />
    </configuration>
    <configuration name="pytest for test_user_handler" type="tests" factoryName="py.test" temporary="true" nameIsGenerated="true">
      <module name="art" />
      <option name="ENV_FILES" value="" />
      <option name="INTERPRETER_OPTIONS" value="" />
      <option name="PARENT_ENVS" value="true" />
      <option name="SDK_HOME" value="$PROJECT_DIR$/.venv/Scripts/python.exe" />
      <option name="WORKING_DIRECTORY" value="$PROJECT_DIR$/tests" />
      <option name="IS_MODULE_SDK" value="true" />
      <option name="ADD_CONTENT_ROOTS" value="true" />
      <option name="ADD_SOURCE_ROOTS" value="true" />
      <EXTENSION ID="PythonCoverageRunConfigurationExtension" runner="coverage.py" />
      <option name="_new_keywords" value="&quot;&quot;" />
      <option name="_new_parameters" value="&quot;&quot;" />
      <option name="_new_additionalArguments" value="&quot;&quot;" />
      <option name="_new_target" value="&quot;test_user_handler&quot;" />
      <option name="_new_targetType" value="&quot;PYTHON&quot;" />
      <method v="2" />
    </configuration>
    <list>
      <item itemvalue="Docker.docker-compose.yaml: Compose Deployment" />
      <item itemvalue="FastAPI.art" />
      <item itemvalue="Python.Worker" />
      <item itemvalue="Python tests.Python tests for test_user_handler.test_handle_user_webhook_unknown_type" />
      <item itemvalue="Python tests.Python tests in test_user_handler.py" />
      <item itemvalue="Python tests.Python tests in tests" />
      <item itemvalue="Python tests.pytest for test_user_handler" />
    </list>
    <recent_temporary>
      <list>
        <item itemvalue="Docker.docker-compose.yaml: Compose Deployment" />
        <item itemvalue="Python tests.pytest for test_user_handler" />
        <item itemvalue="Python tests.Python tests in tests" />
        <item itemvalue="Python tests.Python tests in test_user_handler.py" />
        <item itemvalue="Python tests.Python tests for test_user_handler.test_handle_user_webhook_unknown_type" />
      </list>
    </recent_temporary>
  </component>
  <component name="SharedIndexes">
    <attachedChunks>
      <set>
        <option value="bundled-js-predefined-d6986cc7102b-f27c65a3e318-JavaScript-PY-251.23774.444" />
        <option value="bundled-python-sdk-890ed5b35930-d9c5bdb153f4-com.jetbrains.pycharm.pro.sharedIndexes.bundled-PY-251.23774.444" />
      </set>
    </attachedChunks>
  </component>
  <component name="SpellCheckerSettings" RuntimeDictionaries="0" Folders="0" CustomDictionaries="0" DefaultDictionary="application-level" UseSingleDictionary="true" transferred="true" />
  <component name="TaskManager">
    <task active="true" id="Default" summary="Default task">
      <changelist id="061ea5ed-5158-4b41-9f37-6b36b005802a" name="Changes" comment="" />
      <created>1744770839874</created>
      <option name="number" value="Default" />
      <option name="presentableId" value="Default" />
      <updated>1744770839874</updated>
      <workItem from="1744770840914" duration="6864000" />
      <workItem from="1744853073284" duration="97000" />
      <workItem from="1744853254362" duration="21000" />
      <workItem from="1744853290558" duration="581000" />
      <workItem from="1744853892828" duration="132000" />
      <workItem from="1744854033772" duration="439000" />
      <workItem from="1744854487131" duration="8402000" />
      <workItem from="1744973055863" duration="18817000" />
      <workItem from="1745009988157" duration="31900000" />
      <workItem from="1745084754499" duration="139000" />
      <workItem from="1745084907551" duration="1004000" />
      <workItem from="1745085938343" duration="3296000" />
      <workItem from="1745203806636" duration="104000" />
      <workItem from="1745203920776" duration="200000" />
      <workItem from="1745204127139" duration="53000" />
      <workItem from="1745212256446" duration="1504000" />
      <workItem from="1745213768874" duration="7000" />
      <workItem from="1745213782406" duration="1031000" />
      <workItem from="1745214843194" duration="1678000" />
      <workItem from="1745218131065" duration="515000" />
      <workItem from="1745218654044" duration="59000" />
      <workItem from="1745247237128" duration="87000" />
      <workItem from="1745247333734" duration="1282000" />
      <workItem from="1745248718040" duration="1270000" />
      <workItem from="1745252479412" duration="1369000" />
      <workItem from="1745253896892" duration="484000" />
      <workItem from="1745254388529" duration="331000" />
      <workItem from="1745255134261" duration="16000" />
      <workItem from="1745255170854" duration="66000" />
      <workItem from="1745255245562" duration="163000" />
      <workItem from="1745255514982" duration="24000" />
      <workItem from="1745255545186" duration="2562000" />
      <workItem from="1745362903890" duration="5123000" />
    </task>
    <task id="LOCAL-00001" summary="Add FastAPI app with image generation and infrastructure setup&#10;&#10;Implemented a FastAPI app with an endpoint to generate images using a custom queue-based processing system. Added supporting files including `docker-compose.yaml` for infrastructure (Postgres, Redis, MinIO), a configuration file, and example HTTP tests. Initial project structure and dependencies were established, alongside IDE-specific configurations.">
      <option name="closed" value="true" />
      <created>1744771299702</created>
      <option name="number" value="00001" />
      <option name="presentableId" value="LOCAL-00001" />
      <option name="project" value="LOCAL" />
      <updated>1744771299702</updated>
    </task>
    <task id="LOCAL-00002" summary="Add FastAPI app with image generation and infrastructure setup&#10;&#10;Introduced a FastAPI application with endpoints for image generation, user authentication, and webhook processing using modular routers. Added Docker Compose configuration for supporting infrastructure (InfluxDB, Redis, MinIO, Postgres) and included configuration management and environment variable handling utilities. Enhanced the project with a user model, request validation, and InfluxDB integration for logging.">
      <option name="closed" value="true" />
      <created>1744777367264</created>
      <option name="number" value="00002" />
      <option name="presentableId" value="LOCAL-00002" />
      <option name="project" value="LOCAL" />
      <updated>1744777367264</updated>
    </task>
    <task id="LOCAL-00003" summary="Refactor and enhance prompt handling and logging features&#10;&#10;Refactored `comfy_core` to improve error handling, logging, and modularization for prompt execution and image generation. Introduced `logging_core` for centralized log management with rotation and cleanup. Updated `config.ini` and `config_core` to include logging configurations.">
      <option name="closed" value="true" />
      <created>1744859366959</created>
      <option name="number" value="00003" />
      <option name="presentableId" value="LOCAL-00003" />
      <option name="project" value="LOCAL" />
      <updated>1744859366959</updated>
    </task>
    <task id="LOCAL-00004" summary="Refactor to modularize and enhance database and logging setup&#10;&#10;Separated database, logging, and InfluxDB functionalities into dedicated modules under the `core` directory for better organization and reusability. Updated user model with UUIDs and timestamps while introducing `User` as the primary table. Replaced the utility-based `metric_core` with an OOP-based `InfluxDBWriter` class to improve maintainability.">
      <option name="closed" value="true" />
      <created>1744861212667</created>
      <option name="number" value="00004" />
      <option name="presentableId" value="LOCAL-00004" />
      <option name="project" value="LOCAL" />
      <updated>1744861212667</updated>
    </task>
    <task id="LOCAL-00005" summary="Add user webhook handling and database interaction logic&#10;&#10;Introduced a `handle_user_webhook` function to process user-related webhooks and store user data in the database. Updated the `User` model with utility methods for database insertion and logging improvements. Refactored database session handling and included webhook type enumeration for better structure and scalability.">
      <option name="closed" value="true" />
      <created>1744862928295</created>
      <option name="number" value="00005" />
      <option name="presentableId" value="LOCAL-00005" />
      <option name="project" value="LOCAL" />
      <updated>1744862928295</updated>
    </task>
    <task id="LOCAL-00006" summary="Refactor handlers and APIs, add tests for user webhooks&#10;&#10;Refactored user handling logic to support CRUD operations for webhooks. Updated `Config` to dynamically determine the configuration file path. Split `/generate` route into a dedicated `image_api` module. Added comprehensive tests for user webhook handlers.">
      <option name="closed" value="true" />
      <created>1744975147178</created>
      <option name="number" value="00006" />
      <option name="presentableId" value="LOCAL-00006" />
      <option name="project" value="LOCAL" />
      <updated>1744975147178</updated>
    </task>
    <task id="LOCAL-00007" summary="Add WebSocket support and optimize queue handling logic&#10;&#10;Introduced a WebSocket API for real-time queue updates and adjusted queue filtering for better efficiency. Refactored authentication handler logic and enhanced image generation API with token-based user identification. Updated dependencies and removed redundant code for improved maintainability.">
      <option name="closed" value="true" />
      <created>1744992601810</created>
      <option name="number" value="00007" />
      <option name="presentableId" value="LOCAL-00007" />
      <option name="project" value="LOCAL" />
      <updated>1744992601810</updated>
    </task>
    <task id="LOCAL-00008" summary="Add InfluxDB metrics and refactor image generation logic&#10;&#10;Introduced InfluxDB metrics tracking in the `check_queue` function to monitor queue status. Refactored image generation to use a dedicated handler, improving structure and readability. Also added a background task for queue monitoring during app startup.">
      <option name="closed" value="true" />
      <created>1744996424117</created>
      <option name="number" value="00008" />
      <option name="presentableId" value="LOCAL-00008" />
      <option name="project" value="LOCAL" />
      <updated>1744996424117</updated>
    </task>
    <task id="LOCAL-00009" summary="Integrate Celery for queue handling and enhance logging setup&#10;&#10;Replaced manual queue checks with Celery for distributed task management, including worker and beat processes. Introduced Redis configuration support and updated the logging system to ensure UTF-8 encoding consistency. Adjusted main application lifecycle management to handle worker/beat subprocesses and improved log cleanup logic for better reliability.">
      <option name="closed" value="true" />
      <created>1745026501304</created>
      <option name="number" value="00009" />
      <option name="presentableId" value="LOCAL-00009" />
      <option name="project" value="LOCAL" />
      <updated>1745026501304</updated>
    </task>
    <task id="LOCAL-00010" summary="Add workflow execution logic and enhance image generation API.&#10;&#10;Introduced a modular workflow execution system for ComfyUI, replacing static prompts with dynamic, parameterized workflows. Updated API to validate and handle user-specified workflows with error handling. Streamlined image generation logic into reusable functions, supporting placeholders in workflows for customization and flexibility.">
      <option name="closed" value="true" />
      <created>1745028831209</created>
      <option name="number" value="00010" />
      <option name="presentableId" value="LOCAL-00010" />
      <option name="project" value="LOCAL" />
      <updated>1745028831209</updated>
    </task>
    <task id="LOCAL-00011" summary="Update .gitignore to exclude Celery beat schedule files&#10;&#10;Added `celerybeat-schedule.bak`, `.dat`, and `.dir` to `.gitignore` to prevent versioning of Celery beat schedule files. This ensures unnecessary local files are not tracked in the repository.">
      <option name="closed" value="true" />
      <created>1745028896766</created>
      <option name="number" value="00011" />
      <option name="presentableId" value="LOCAL-00011" />
      <option name="project" value="LOCAL" />
      <updated>1745028896766</updated>
    </task>
    <task id="LOCAL-00012" summary="Add Dockerfile, enhance config management, and logging  &#10;&#10;Introduce a new Dockerfile for containerization. Rework configuration handling to include better fallback and validation mechanisms, including default values for critical settings. Improve logging infrastructure with enhanced error handling, log rotation, and configuration-driven parameters. Added Celery setup in requirements and adjusted docker-compose services for robust service dependency management.">
      <option name="closed" value="true" />
      <created>1745032997090</created>
      <option name="number" value="00012" />
      <option name="presentableId" value="LOCAL-00012" />
      <option name="project" value="LOCAL" />
      <updated>1745032997090</updated>
    </task>
    <task id="LOCAL-00013" summary="Refactor user and ComfyUI handlers to improve modularity and error handling&#10;&#10;Revised user management to utilize service layer for create, update, and delete operations. Enhanced error handling and logging in ComfyUI workflows and improved maintainability by refactoring shared components. Applied input validations and adjusted datetime handling for consistency across the codebase.">
      <option name="closed" value="true" />
      <created>1745070548454</created>
      <option name="number" value="00013" />
      <option name="presentableId" value="LOCAL-00013" />
      <option name="project" value="LOCAL" />
      <updated>1745070548454</updated>
    </task>
    <task id="LOCAL-00014" summary="&quot;Refactor logging and add log cleanup logic&quot;&#10;&#10;Revised logging setup to support configuration-driven parameters and improve modularity. Added a log cleanup mechanism to manage log file retention based on configurable limits. Enhanced error handling in logging and log cleanup functions for better reliability and maintainability.">
      <option name="closed" value="true" />
      <created>1745071029191</created>
      <option name="number" value="00014" />
      <option name="presentableId" value="LOCAL-00014" />
      <option name="project" value="LOCAL" />
      <updated>1745071029191</updated>
    </task>
    <task id="LOCAL-00015" summary="Add .pylintrc configuration file to disable specific checks&#10;&#10;This configuration disables docstring and naming checks to streamline linting for the current codebase. It also sets a minimum score threshold of 8.0 and outputs results in JSON format.">
      <option name="closed" value="true" />
      <created>1745073854459</created>
      <option name="number" value="00015" />
      <option name="presentableId" value="LOCAL-00015" />
      <option name="project" value="LOCAL" />
      <updated>1745073854459</updated>
    </task>
    <task id="LOCAL-00016" summary="Refactor user webhook handling and improve workflow execution.&#10;&#10;Refactored user webhook processing for better readability and fixed inconsistent logging. Adjusted workflow execution functions in `comfy_core` to enhance error handling, add missing validations, and clean up logging statements. Removed duplicated logic and addressed minor formatting issues across files.">
      <option name="closed" value="true" />
      <created>1745075738323</created>
      <option name="number" value="00016" />
      <option name="presentableId" value="LOCAL-00016" />
      <option name="project" value="LOCAL" />
      <updated>1745075738323</updated>
    </task>
    <task id="LOCAL-00017" summary="Standardize formatting and fix indentations in codebase&#10;&#10;Improved code readability by standardizing formatting, fixing inconsistent indentations, and removing unnecessary imports. These changes ensure better code style adherence and maintainability without altering functionality.">
      <option name="closed" value="true" />
      <created>1745075919243</created>
      <option name="number" value="00017" />
      <option name="presentableId" value="LOCAL-00017" />
      <option name="project" value="LOCAL" />
      <updated>1745075919243</updated>
    </task>
    <task id="LOCAL-00018" summary="Simplify logging statements and remove unused code.&#10;&#10;Replaced formatted string literals with standardized logging placeholders across the codebase to improve consistency and clarity in log messages. Additionally, removed the unused `cleanup_old_logs` function from `logging_core.py` to reduce dead code.">
      <option name="closed" value="true" />
      <created>1745076541361</created>
      <option name="number" value="00018" />
      <option name="presentableId" value="LOCAL-00018" />
      <option name="project" value="LOCAL" />
      <updated>1745076541361</updated>
    </task>
    <task id="LOCAL-00019" summary="    Update .pylintrc to include import-error in ignored rules&#10;&#10;    Added import-error to the list of ignored pylint rules to prevent unnecessary warnings related to imports. This ensures smoother linting for cases where imports may fail due to environment-specific configurations.">
      <option name="closed" value="true" />
      <created>1745076685458</created>
      <option name="number" value="00019" />
      <option name="presentableId" value="LOCAL-00019" />
      <option name="project" value="LOCAL" />
      <updated>1745076685458</updated>
    </task>
    <task id="LOCAL-00020" summary="Refactor logging and add log cleanup utility.&#10;&#10;Replaced f-strings in logging calls with parameterized log messages for consistency and efficiency. Added a `cleanup_old_logs` function to manage log file retention, ensuring only the most recent logs are retained.">
      <option name="closed" value="true" />
      <created>1745077054929</created>
      <option name="number" value="00020" />
      <option name="presentableId" value="LOCAL-00020" />
      <option name="project" value="LOCAL" />
      <updated>1745077054929</updated>
    </task>
    <task id="LOCAL-00021" summary="Use placeholders in log messages to enhance consistency&#10;&#10;Replaced f-strings with placeholder-based logging across the codebase to improve performance and ensure consistency. This approach defers string formatting until log messages are actually emitted, conforming to best practices for logging in Python.">
      <option name="closed" value="true" />
      <created>1745077345716</created>
      <option name="number" value="00021" />
      <option name="presentableId" value="LOCAL-00021" />
      <option name="project" value="LOCAL" />
      <updated>1745077345716</updated>
    </task>
    <task id="LOCAL-00022" summary="&quot;Standardize logging and fix formatting issues&#10;&#10;Replaced f-strings with parameterized logging for consistency and performance improvements. Fixed inconsistencies in indentation, formatting, and unused imports for better code readability and maintainability.&quot;">
      <option name="closed" value="true" />
      <created>1745079457363</created>
      <option name="number" value="00022" />
      <option name="presentableId" value="LOCAL-00022" />
      <option name="project" value="LOCAL" />
      <updated>1745079457363</updated>
    </task>
    <task id="LOCAL-00023" summary="Refactor and clean up codebase for consistency and readability&#10;&#10;Applied formatting improvements across multiple modules to enhance code consistency and readability. Resolved redundant logic, improved exception handling, and adhered to best practices in method and error definitions. Also added PyLint and Ruff configuration files for static analysis support.">
      <option name="closed" value="true" />
      <created>1745080108837</created>
      <option name="number" value="00023" />
      <option name="presentableId" value="LOCAL-00023" />
      <option name="project" value="LOCAL" />
      <updated>1745080108837</updated>
    </task>
    <task id="LOCAL-00024" summary="Refactor imports across modules for consistency&#10;&#10;Reorganized imports to align with PEP 8 guidelines by grouping standard library, third-party, and local module imports. Addressed unused or redundant imports, ensuring improved readability and maintainability.">
      <option name="closed" value="true" />
      <created>1745081956898</created>
      <option name="number" value="00024" />
      <option name="presentableId" value="LOCAL-00024" />
      <option name="project" value="LOCAL" />
      <updated>1745081956898</updated>
    </task>
    <task id="LOCAL-00025" summary="&quot;Refactor logging and formatting across multiple modules.&#10;&#10;Standardized logging by replacing f-strings with parameterized log messages for improved performance and consistency. Improved code readability by fixing formatting issues, including line breaks, indentation, and redundant logic. Updated configurations to enhance maintainability and enforced better logging practices.&quot;">
      <option name="closed" value="true" />
      <created>1745082181145</created>
      <option name="number" value="00025" />
      <option name="presentableId" value="LOCAL-00025" />
      <option name="project" value="LOCAL" />
      <updated>1745082181145</updated>
    </task>
    <task id="LOCAL-00026" summary="Use modern `dict` type hints across the codebase&#10;&#10;Replaced `Dict` type hints with modern `dict` syntax for improved consistency and readability. This change aligns with Python 3.9+ typing conventions and simplifies type annotations throughout the project. Updated multiple files to adhere to this standard.">
      <option name="closed" value="true" />
      <created>1745082565911</created>
      <option name="number" value="00026" />
      <option name="presentableId" value="LOCAL-00026" />
      <option name="project" value="LOCAL" />
      <updated>1745082565911</updated>
    </task>
    <task id="LOCAL-00027" summary="Fix dependency function calls by removing redundant parentheses&#10;&#10;Removed unnecessary parentheses from `Depends(auth.authenticated)` in `image_api.py` and `auth_api.py`. This fixes potential issues with function injection and aligns with FastAPI's expected usage.">
      <option name="closed" value="true" />
      <created>1745082869030</created>
      <option name="number" value="00027" />
      <option name="presentableId" value="LOCAL-00027" />
      <option name="project" value="LOCAL" />
      <updated>1745082869030</updated>
    </task>
    <task id="LOCAL-00028" summary="Fix redundant parentheses in dependency injection calls&#10;&#10;Removed unnecessary parentheses from `Depends(auth.authenticated)` in `image_api.py` and `auth_api.py` to resolve potential issues with FastAPI's dependency injection. This change ensures alignment with FastAPI's expected usage and improves code readability. Additionally, restructured `load_dotenv()` placement for consistency across modules.">
      <option name="closed" value="true" />
      <created>1745083484580</created>
      <option name="number" value="00028" />
      <option name="presentableId" value="LOCAL-00028" />
      <option name="project" value="LOCAL" />
      <updated>1745083484580</updated>
    </task>
    <option name="localTasksCounter" value="29" />
    <servers />
  </component>
  <component name="TypeScriptGeneratedFilesManager">
    <option name="version" value="3" />
  </component>
  <component name="Vcs.Log.Tabs.Properties">
    <option name="TAB_STATES">
      <map>
        <entry key="MAIN">
          <value>
            <State />
          </value>
        </entry>
      </map>
    </option>
  </component>
  <component name="VcsManagerConfiguration">
    <MESSAGE value="Add user webhook handling and database interaction logic&#10;&#10;Introduced a `handle_user_webhook` function to process user-related webhooks and store user data in the database. Updated the `User` model with utility methods for database insertion and logging improvements. Refactored database session handling and included webhook type enumeration for better structure and scalability." />
    <MESSAGE value="Refactor handlers and APIs, add tests for user webhooks&#10;&#10;Refactored user handling logic to support CRUD operations for webhooks. Updated `Config` to dynamically determine the configuration file path. Split `/generate` route into a dedicated `image_api` module. Added comprehensive tests for user webhook handlers." />
    <MESSAGE value="Add WebSocket support and optimize queue handling logic&#10;&#10;Introduced a WebSocket API for real-time queue updates and adjusted queue filtering for better efficiency. Refactored authentication handler logic and enhanced image generation API with token-based user identification. Updated dependencies and removed redundant code for improved maintainability." />
    <MESSAGE value="Add InfluxDB metrics and refactor image generation logic&#10;&#10;Introduced InfluxDB metrics tracking in the `check_queue` function to monitor queue status. Refactored image generation to use a dedicated handler, improving structure and readability. Also added a background task for queue monitoring during app startup." />
    <MESSAGE value="Integrate Celery for queue handling and enhance logging setup&#10;&#10;Replaced manual queue checks with Celery for distributed task management, including worker and beat processes. Introduced Redis configuration support and updated the logging system to ensure UTF-8 encoding consistency. Adjusted main application lifecycle management to handle worker/beat subprocesses and improved log cleanup logic for better reliability." />
    <MESSAGE value="Add workflow execution logic and enhance image generation API.&#10;&#10;Introduced a modular workflow execution system for ComfyUI, replacing static prompts with dynamic, parameterized workflows. Updated API to validate and handle user-specified workflows with error handling. Streamlined image generation logic into reusable functions, supporting placeholders in workflows for customization and flexibility." />
    <MESSAGE value="Update .gitignore to exclude Celery beat schedule files&#10;&#10;Added `celerybeat-schedule.bak`, `.dat`, and `.dir` to `.gitignore` to prevent versioning of Celery beat schedule files. This ensures unnecessary local files are not tracked in the repository." />
    <MESSAGE value="Add Dockerfile, enhance config management, and logging  &#10;&#10;Introduce a new Dockerfile for containerization. Rework configuration handling to include better fallback and validation mechanisms, including default values for critical settings. Improve logging infrastructure with enhanced error handling, log rotation, and configuration-driven parameters. Added Celery setup in requirements and adjusted docker-compose services for robust service dependency management." />
    <MESSAGE value="Refactor user and ComfyUI handlers to improve modularity and error handling&#10;&#10;Revised user management to utilize service layer for create, update, and delete operations. Enhanced error handling and logging in ComfyUI workflows and improved maintainability by refactoring shared components. Applied input validations and adjusted datetime handling for consistency across the codebase." />
    <MESSAGE value="&quot;Refactor logging and add log cleanup logic&quot;&#10;&#10;Revised logging setup to support configuration-driven parameters and improve modularity. Added a log cleanup mechanism to manage log file retention based on configurable limits. Enhanced error handling in logging and log cleanup functions for better reliability and maintainability." />
    <MESSAGE value="Add .pylintrc configuration file to disable specific checks&#10;&#10;This configuration disables docstring and naming checks to streamline linting for the current codebase. It also sets a minimum score threshold of 8.0 and outputs results in JSON format." />
    <MESSAGE value="Refactor user webhook handling and improve workflow execution.&#10;&#10;Refactored user webhook processing for better readability and fixed inconsistent logging. Adjusted workflow execution functions in `comfy_core` to enhance error handling, add missing validations, and clean up logging statements. Removed duplicated logic and addressed minor formatting issues across files." />
    <MESSAGE value="Standardize formatting and fix indentations in codebase&#10;&#10;Improved code readability by standardizing formatting, fixing inconsistent indentations, and removing unnecessary imports. These changes ensure better code style adherence and maintainability without altering functionality." />
    <MESSAGE value="Simplify logging statements and remove unused code.&#10;&#10;Replaced formatted string literals with standardized logging placeholders across the codebase to improve consistency and clarity in log messages. Additionally, removed the unused `cleanup_old_logs` function from `logging_core.py` to reduce dead code." />
    <MESSAGE value="    Update .pylintrc to include import-error in ignored rules&#10;&#10;    Added import-error to the list of ignored pylint rules to prevent unnecessary warnings related to imports. This ensures smoother linting for cases where imports may fail due to environment-specific configurations." />
    <MESSAGE value="Refactor logging and add log cleanup utility.&#10;&#10;Replaced f-strings in logging calls with parameterized log messages for consistency and efficiency. Added a `cleanup_old_logs` function to manage log file retention, ensuring only the most recent logs are retained." />
    <MESSAGE value="Use placeholders in log messages to enhance consistency&#10;&#10;Replaced f-strings with placeholder-based logging across the codebase to improve performance and ensure consistency. This approach defers string formatting until log messages are actually emitted, conforming to best practices for logging in Python." />
    <MESSAGE value="&quot;Standardize logging and fix formatting issues&#10;&#10;Replaced f-strings with parameterized logging for consistency and performance improvements. Fixed inconsistencies in indentation, formatting, and unused imports for better code readability and maintainability.&quot;" />
    <MESSAGE value="Refactor and clean up codebase for consistency and readability&#10;&#10;Applied formatting improvements across multiple modules to enhance code consistency and readability. Resolved redundant logic, improved exception handling, and adhered to best practices in method and error definitions. Also added PyLint and Ruff configuration files for static analysis support." />
    <MESSAGE value="Refactor imports across modules for consistency&#10;&#10;Reorganized imports to align with PEP 8 guidelines by grouping standard library, third-party, and local module imports. Addressed unused or redundant imports, ensuring improved readability and maintainability." />
    <MESSAGE value="&quot;Refactor logging and formatting across multiple modules.&#10;&#10;Standardized logging by replacing f-strings with parameterized log messages for improved performance and consistency. Improved code readability by fixing formatting issues, including line breaks, indentation, and redundant logic. Updated configurations to enhance maintainability and enforced better logging practices.&quot;" />
    <MESSAGE value="Use modern `dict` type hints across the codebase&#10;&#10;Replaced `Dict` type hints with modern `dict` syntax for improved consistency and readability. This change aligns with Python 3.9+ typing conventions and simplifies type annotations throughout the project. Updated multiple files to adhere to this standard." />
    <MESSAGE value="Fix dependency function calls by removing redundant parentheses&#10;&#10;Removed unnecessary parentheses from `Depends(auth.authenticated)` in `image_api.py` and `auth_api.py`. This fixes potential issues with function injection and aligns with FastAPI's expected usage." />
    <MESSAGE value="Fix redundant parentheses in dependency injection calls&#10;&#10;Removed unnecessary parentheses from `Depends(auth.authenticated)` in `image_api.py` and `auth_api.py` to resolve potential issues with FastAPI's dependency injection. This change ensures alignment with FastAPI's expected usage and improves code readability. Additionally, restructured `load_dotenv()` placement for consistency across modules." />
    <MESSAGE value="Create workflow and image models with supporting enums  &#10;&#10;Added Workflow and Image models, providing schema definitions for database operations. Introduced supporting enums (Model, WorkflowType, and WorkflowSegment) to categorize workflow types and related segments. Updated main.py and related configurations to integrate the models. Additionally, fixed paths and updated IDE settings for consistency." />
    <option name="LAST_COMMIT_MESSAGE" value="" />
  </component>
  <component name="XDebuggerManager">
    <breakpoint-manager>
      <breakpoints>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1339</line>
          <option name="timeStamp" value="1" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1340</line>
          <option name="timeStamp" value="2" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1341</line>
          <option name="timeStamp" value="3" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1342</line>
          <option name="timeStamp" value="4" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1343</line>
          <option name="timeStamp" value="5" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1347</line>
          <option name="timeStamp" value="6" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1350</line>
          <option name="timeStamp" value="7" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1352</line>
          <option name="timeStamp" value="8" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1345</line>
          <option name="timeStamp" value="9" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1346</line>
          <option name="timeStamp" value="10" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1344</line>
          <option name="timeStamp" value="11" />
        </line-breakpoint>
        <line-breakpoint enabled="true" suspend="THREAD" type="python-line">
          <url>file://$PROJECT_DIR$/.venv/Lib/site-packages/fief_client/client.py</url>
          <line>1348</line>
          <option name="timeStamp" value="12" />
        </line-breakpoint>
      </breakpoints>
    </breakpoint-manager>
  </component>
  <component name="com.intellij.coverage.CoverageDataManagerImpl">
    <SUITE FILE_PATH="coverage/art$art.coverage" NAME="art Coverage Results" MODIFIED="1745089034899" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="" />
    <SUITE FILE_PATH="coverage/art$Worker.coverage" NAME="Worker Coverage Results" MODIFIED="1745013748926" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="C:\Users\pedro\PycharmProjects\art" />
    <SUITE FILE_PATH="coverage/o_art$art.coverage" NAME="art Coverage Results" MODIFIED="1745367650377" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="" />
    <SUITE FILE_PATH="coverage/art$.coverage" NAME=" Coverage Results" MODIFIED="1744975086376" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/tests" />
    <SUITE FILE_PATH="coverage/art$pytest_for_test_user_handler.coverage" NAME="pytest for test_user_handler Coverage Results" MODIFIED="1744974797612" SOURCE_PROVIDER="com.intellij.coverage.DefaultCoverageFileProvider" RUNNER="coverage.py" COVERAGE_BY_TEST_ENABLED="false" COVERAGE_TRACING_ENABLED="false" WORKING_DIRECTORY="$PROJECT_DIR$/tests" />
  </component>
</project>